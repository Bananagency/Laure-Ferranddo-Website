---
import Layout from "../../layouts/Layout.astro";

let username = "ck_161f50a99e27952f050ecad5caacbd5537c6c461";
let password = "cs_2e904a2e78cd073eeedb9b0f6c9dcf76eb96779d";

let headers = new Headers();

headers.set("Authorization", "Basic " + btoa(username + ":" + password));

const response = await fetch(
    "https://admin.laure-ferrando.com/wp-json/wc/v3/products",
    {
        method: "GET",
        headers: headers,
    },
);

const products = await response.json();
---

<Layout title="Boutique">
    <div class="Boutique">
        <div class="Boutique__products">
            {
                products.map((product: any) => (
                    <div class="Boutique__products__product">
                        <img
                            class="Boutique__products__product__image"
                            src={product.images[0] ? product.images[0].src : ""}
                            alt=""
                        />
                        <h2 class="Boutique__products__product__title">
                            {product.name}
                        </h2>
                        <p class="Boutique__products__product__price">
                            {product.price} â‚¬
                        </p>
                    </div>
                ))
            }
        </div>
    </div>
</Layout>

<style lang="scss">
    .Boutique {
        &__products {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1rem;
            padding: 2rem;
            &__product {
                &__image {
                    width: 100%;
                    height: 336px;
                    object-fit: cover;
                }
                &__title {
                    font-size: 1rem;
                    margin: 0.5rem 0;
                    font-family: "Lato", sans-serif;
                    font-weight: 600;
                }
                &__price {
                    font-size: 1rem;
                    font-family: "Lato", sans-serif;
                    font-weight: 300;
                }
            }
        }
    }
</style>
